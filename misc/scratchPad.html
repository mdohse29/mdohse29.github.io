<!DOCTYPE html>
<html lang="en">
<head>
    <!-- 
        todo: 
            * Add some sort of cache or cookie to allow for temporary storrage of the scratchpad
    
    -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
    
    <title>Scratch Pad</title>
    <script>
        $(document).ready(function(){
            let previous = document.referrer;
            if (previous == "https://mdohse29.github.io/toolBox.html"){
                $('#toolBox').show();
            }

            var currentVal = $('select').val();
            $('#TextArea').css('background-color', currentVal);
            if(currentVal == '#242729' || currentVal == "#1f9fd1"){
                $('#TextArea').css('color', 'white');
                // $('#TextArea').css('font-weight', 'normal');
            }else{
                $('#TextArea').css('color', 'black');
                // $('#TextArea').css('font-weight', '900');
            }

            $('option').click(function(){
                var color = $(this).val();
                $('#TextArea').css('background-color', color);
                if (color == '#242729' || color == "#1f9fd1"){
                    $('#TextArea').css('color', 'white');
                    // $('#TextArea').css('font-weight', 'normal');
                }else{
                    $('#TextArea').css('color', 'black');
                    // $('#TextArea').css('font-weight', '900');
                }
                location.reload();
            });

            $('#TextArea').on('paste', function(){
                /*
                Possible regex for stripping html from the text
                cleanText = strInputCode.replace(/<\/?[^>]+(>|$)/g, ""); -- stack overflow

                The following is the beginning of the format detector
                Currently it only detects closing and self closing html tags
                Waiting for positive case test where Unicode is slipping by.
                So far I can not reproduce copying external formatting into the scratch pad
                I have confirmed that the text I was using did have formatting,
                    when I paste it into the scratch pad the formatting is removed
                    as previously expected, but I have had reports of formatting
                    still getting through. Isolated reports, but still. Not able to reproduce

                I am also on the fence on whether or not to strip the found html
                tags or stick with just alerting the user. There are cases where html tags maybe legit and not need to be removed. Maybe we just add a remove formatting button or something. Food for thought
                */
                setTimeout(function(){
                    let text = $('#TextArea').val();
                    if (text.includes("/>") || text.includes("</")){
                        alert("HTML MARKERS HAVE BEEN DETECTED\n\nDOUBLE CHECK THE DOCUMENT FOR UNUSUAL FORMATTING");
                    }
                }, 700);
            });

        });
    </script>

</head>
<body>
    <h3 id="toolBox" style="float: right;display:none"><a href="../toolBox.html">Back to ToolBox</a></h3>
    <div id="TextAreaContain" style="display: inline-block;">
    <select name="color" id="color" style="float: right;margin-left: 15px;">
        <option style="background-color: #242729;color: white;" value="#242729" selected>Dark</option>
        <option style="background-color: #33f753;color: black;" value="#33f753">Green</option>
        <option style="background-color: #1f9fd1;color: white;" value="#1f9fd1">Blue</option>
        <option value="white">White</option>
        <option style="background-color: #f2f224;color: black;" value="#f2f224">Yellow</option>
    </select>
        <textarea name="scratchPad" id="TextArea" cols="100" rows="50" encoding="UTF-8" style="font-size: 14px;" autofocus></textarea>
    </div>
    <!-- <p><iframe src="../archive.txt" frameborder="0" height="400"
        width="95%"></iframe></p> -->
</body>
</html>